ssl_session_cache   shared:SSL:10m;
ssl_session_timeout 10m;



server {
    listen              443 ssl;
    server_name         uci.villamil.link;
    keepalive_timeout   70;

    proxy_busy_buffers_size   512k;
    proxy_buffers   4 512k;
    proxy_buffer_size   256k;

    ssl_certificate     secure/villamil/fullchain.pem;
    ssl_certificate_key secure/villamil/privkey.pem;
    ssl_protocols       TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers         HIGH:!aNULL:!MD5;

    location /auth {
        proxy_pass http://172.26.2.165:8080;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Host $host;
    }
    
    location /coc {
        proxy_pass http://web-ui:3000;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Host $host;
    }

    location /static {
        proxy_pass http://web-ui:3000;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Host $host;
    }

}


server {
    listen              443 ssl;
    server_name         uci.cysce.com;
    keepalive_timeout   70;

    proxy_busy_buffers_size   512k;
    proxy_buffers   4 512k;
    proxy_buffer_size   256k;

    ssl_certificate     secure/cysce/fullchain.pem;
    ssl_certificate_key secure/cysce/privkey.pem;
    ssl_protocols       TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers         HIGH:!aNULL:!MD5;

    location /auth {
        proxy_pass http://172.26.2.165:8080;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Host $host;
    }
    
    location /coc {
        proxy_pass http://web-ui:3000;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Host $host;
    }

    location /static {
        proxy_pass http://web-ui:3000;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Host $host;
    }

}

server {
    listen              443 ssl;
    server_name         localhttpserver.villamil.link;
    keepalive_timeout   70;

    ssl_certificate     secure/villamil/fullchain.pem;
    ssl_certificate_key secure/villamil/privkey.pem;
    ssl_protocols       TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers         HIGH:!aNULL:!MD5;

    location / {
        root   /usr/share/nginx/html;
        index  index.html index.htm;
    }


}